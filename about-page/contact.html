<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Us · MAXX Energy</title>
  <style>
    :root { --bg:#f7fafc; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --brand:#0284c7; }
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    .wrap{max-width:720px;margin:48px auto;padding:0 16px}
    .card{background:var(--card);border-radius:16px;box-shadow:0 10px 24px rgba(2,8,23,.08);padding:24px}
    h1{margin:.2em 0 8px;font-size:28px}
    p.lead{color:var(--muted);margin-top:0}
    label{display:block;font-weight:600;margin:16px 0 6px}
    input,textarea{width:100%;padding:12px 14px;border:1px solid #e5e7eb;border-radius:10px;font-size:16px}
    textarea{min-height:140px;resize:vertical}
    .row{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    .btn{margin-top:18px;background:var(--brand);border:none;color:white;padding:12px 16px;border-radius:12px;font-weight:700;cursor:pointer}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .msg{margin-top:16px;padding:12px 14px;border-radius:12px;display:none}
    .msg.ok{background:#ecfdf5;color:#065f46;display:block}
    .msg.err{background:#fef2f2;color:#991b1b;display:block}
    .req{color:#ef4444}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
  </style>
</head>
<body>
  <main class="wrap">
    <div class="card">
      <h1>Contact Us</h1>
      <p class="lead">Have a question or need more info? Send us a note and we’ll get back to you.</p>

      <form id="contactForm" novalidate>
        <div class="row">
          <div>
            <label for="name">Name <span class="req">*</span></label>
            <input id="name" name="name" type="text" placeholder="Your name" required />
          </div>
          <div>
            <label for="email">Email <span class="req">*</span></label>
            <input id="email" name="email" type="email" placeholder="you@example.com" required />
            <div class="hint">We’ll only use this to reply.</div>
          </div>
        </div>

        <label for="message">Message <span class="req">*</span></label>
        <textarea id="message" name="message" placeholder="How can we help?" required></textarea>

        <button class="btn" id="submitBtn" type="submit">Send Message</button>
        <div id="success" class="msg ok">Thanks! Your message was sent ✅</div>
        <div id="error" class="msg err">Uh oh—please try again. If it keeps happening, email us directly.</div>
      </form>
    </div>
  </main>

  <script>
    // Set this to your API origin if you enable the Java backend below.
    // Leave it "" for demo mode (no network)—you'll still get validation + success message.
    const API_BASE = ""; // e.g. "http://localhost:8080"

    const form = document.getElementById('contactForm');
    const btn  = document.getElementById('submitBtn');
    const okEl = document.getElementById('success');
    const errEl= document.getElementById('error');

    function validEmail(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      okEl.style.display = 'none';
      errEl.style.display = 'none';

      const name = form.name.value.trim();
      const email = form.email.value.trim();
      const message = form.message.value.trim();

      if(!name || !email || !message){
        errEl.textContent = "Please fill out all required fields.";
        errEl.style.display = 'block';
        return;
      }
      if(!validEmail(email)){
        errEl.textContent = "Please enter a valid email address.";
        errEl.style.display = 'block';
        return;
      }

      btn.disabled = true;

      if(!API_BASE){
        // Demo mode: no network call; simulate success
        await new Promise(r=>setTimeout(r,600));
        okEl.style.display = 'block';
        form.reset();
        btn.disabled = false;
        return;
      }

      try{
        const res = await fetch(`${API_BASE}/api/contact`,{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ name, email, message })
        });
        if(res.ok){
          okEl.style.display = 'block';
          form.reset();
        }else{
          errEl.textContent = "Server error—please try again.";
          errEl.style.display = 'block';
        }
      }catch(err){
        errEl.textContent = "Network error—please check your connection.";
        errEl.style.display = 'block';
      }finally{
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
